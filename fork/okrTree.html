<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src=https://dss1.bdstatic.com/5eN1bjq8AAUYm2zgoY3K/r/www/cache/static/protocol/https/jquery/jquery-1.10.2.min_65682a2.js></script>
    <style>
        /* .OkrTree .row {
            zoom: 1
        }
        
        .OkrTree .row::after {
            content: " ";
            display: block;
            clear: both
        }
        
        .OkrTree .item {
            display: table-cell;
            position: relative;
            text-align: center;
            vertical-align: top;
        }
        
        .OkrTree .line {
            margin: auto;
            height: 20px
        }
        
        .OkrTree .line .left {
            width: 50%;
            height: 100%;
            float: left;
            box-sizing: border-box;
            border-right: solid 1px ${opts.css.lineColor};
        }
        
        .OkrTree .line .right {
            width: 50%;
            height: 100%;
            float: left;
            box-sizing: border-box;
            border-left: solid 1px ${opts.css.lineColor};
        }
        
        .OkrTree .row .item:first-child {
            margin-left: 0
        }
        
        .OkrTree .content {
            text-align: center;
            margin: auto;
            box-sizing: border-box;
            padding: 0 10px;
            border-radius: 4px;
            white-space: normal
        }
        
        .OkrTree .content>.template {
            width: auto;
            margin: auto;
            display: inline-block;
            border-radius: 4px;
            word-break: break-all;
            white-space: pre-wrap
        }
        
        .OkrTree .lineTop {
            height: 20px;
            margin: auto;
            position: relative;
        }
        
        .OkrTree .lineTop>.line-left {
            width: 50%;
            position: absolute;
            box-sizing: border-box;
            height: 100%;
            border-right: solid 1px ${opts.css.lineColor};
        }
        
        .OkrTree .lineTop>.line-left.top {
            border-top: solid 2px ${opts.css.lineColor};
        }
        
        .OkrTree .lineTop>.line-right.top {
            border-top: solid 2px ${opts.css.lineColor};
        }
        
        .OkrTree .lineTop>.line-right {
            position: absolute;
            left: 50%;
            box-sizing: border-box;
            width: 50%;
            border-left: solid 1px ${opts.css.lineColor};
            height: 100%;
        }
        
        .OkrTree .tagBox {
            overflow: hidden;
            min-height: 50px;
            box-sizing: border-box
        }
        
        .OkrTree .tagBox>div {
            float: left;
            width: 50%;
            height: 100%;
            box-sizing: border-box;
        }
        
        .OkrTree .tagBox div.tagLeft {
            border-right: solid 1px ${opts.css.lineColor};
            position: relative
        }
        
        .OkrTree .tagBox>.tagDownLine {
            width: 0px;
            border-right: 2px solid ${opts.css.lineColor};
            position: absolute;
            left: 50%;
            margin-left: -1px;
            height: 50%
        }
        
        .OkrTree .tagBox div.tagRight {
            border-left: solid 1px ${opts.css.lineColor};
            position: relative
        }
        
        .OkrTree .tagBox div.tagRight>.line {
            width: 50px;
            height: 0;
            top: 50%;
            margin-top: -1px;
            border-bottom: solid 2px ${opts.css.lineColor};
            position: absolute
        }
        
        .OkrTree .tagContent {
            position: absolute;
            top: 50%;
            left: 50px;
            width: auto;
            text-align: center;
            border-radius: 4px;
        }
        
        .OkrTree .tagBox div.tagRight .tagItem {
            height: 40px;
            background-color: green;
            position: absolute;
            right: 0;
            top: 50%;
            margin-top: -20px;
            border-radius: 2px;
            color: #fff;
            text-align: center;
            line-height: 40px
        }
        
        .OkrTree .expandIcon {
            display: inline-block;
            width: 20px;
            height: 20px;
            background-color: ${opts.css.lineColor};
            color: #fff;
            font-size: 100%;
            line-height: 20px;
            text-align: center;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold
        }
        
        .OkrTree .template {
            border: solid 1px transparent;
        } */
    </style>
</head>

<body style="text-align:center;">
    <div id="orgTree" class="OkrTree" style="display: inline-block; zoom:1">
    </div>
</body>

</html>
<script>
    var json = [{
        "name": "root",
        "children": [{
            "name": "1",
            "children": [{
                "name": "1-1"
            }, {
                "name": "1-2",
                "children": [{
                    "name": "一段测试的节点我希望里面的文字换行显示高度自动撑开",
                    "children": [{
                        "name": "asdasd"
                    }, {
                        "name": "asdad",
                        "type": "tag"
                    }, {
                        "name": "asda",
                        "children": [{
                            "name": "asdasd"
                        }, {
                            "name": "asdad",
                            "type": "tag"
                        }]
                    }]
                }]
            }, {
                "name": "1-5",
                "type": "tag"
            }, {
                "name": "1-3"
            }, {
                "name": "1-4",
                "children": [{
                    "name": "asda"
                }, {
                    "name": "asdas"
                }]
            }, {
                "name": "1-5"
            }]
        }, {
            "name": "2",
            "children": [{
                "name": "asdad",
                "type": "tag"
            }, {
                "name": "2-1",
                "children": [{
                    "name": "asd",
                    "type": "tag"
                }, {
                    "name": "fan",
                    "children": [{
                        "name": "2-1-1",
                        "children": [{
                            "name": "2-1-1-0"
                        }]
                    }]
                }]
            }, {
                "name": "2-2",
                "children": [{
                    "name": "2-2-1"
                }, {
                    "name": "2-2-2",
                    "type": "tag"
                }]
            }]
        }, {
            "name": "3",
            "children": [{
                "name": "3-1",
                "children": [{
                    "name": "2-4"
                }]
            }, {
                "name": "3-2"
            }, {
                "name": "tag",
                "type": "tag"
            }]
        }, {
            "name": "4",
            "children": [{
                "name": "测试",
                "type": "tag"
            }, {
                "name": "4-1",
                "children": [{
                    "name": "tag",
                    "type": "tag"
                }, {
                    "name": "4-1-1"
                }, {
                    "name": "4-1-2"
                }]
            }, {
                "name": "5-1-1-1",
                "children": [{
                    "name": "adasd"
                }, {
                    "name": "zui",
                    "type": "tag"
                }]
            }]
        }, {
            "name": "5",
            "children": [{
                "name": "5-1",
                "children": [{
                    "name": "5-1-1",
                    "children": [{
                        "name": "zda",
                        "type": "tag"
                    }, {
                        "name": "4-2",
                        "children": ""
                    }]
                }, {
                    "name": "z",
                    "type": "tag"
                }]
            }]
        }, {
            "name": "6",
            "type": "tag"
        }]
    }];
</script>
<script src="./okrTree.js"></script>
<script>
    var json = [{
        "id": "topId",
        "name": "总裁办",
        "position": "存在以下多个顶点！",
        "photos": "/Images/PER/bg_02.gif",
        "pid": "",
        "children": [{
            "id": "00008",
            "name": "lex",
            "position": "MR",
            "photos": "/Images/PER/bg_02.gif",
            "pid": "topId",
            "children": []
        }, {
            "id": "00009",
            "name": "lex",
            "position": "APM",
            "photos": "/Images/PER/bg_02.gif",
            "pid": "topId",
            "children": []
        }, {
            "id": "1110222",
            "name": "员工姓名",
            "position": "MR",
            "photos": "/Images/PER/bg_02.gif",
            "pid": "topId",
            "children": []
        }, {
            "id": "D0001",
            "name": "Lex",
            "position": "高级副总裁",
            "photos": "/OrgChart/D0001.JPG",
            "pid": "topId",
            "children": [{
                "id": "D0002",
                "type": "tag",
                "name": "Hanson",
                "position": "(兼)AM",
                "photos": "/OrgChart/D0002.JPG",
                "pid": "D0001",
                "children": []
            }]
        }, {
            "id": "D02043",
            "name": "大胖子",
            "position": "高级副总裁",
            "photos": "/OrgChart/D02043.JPG",
            "pid": "topId",
            "type": "tag",
            "children": []
        }, {
            "id": "D0730",
            "name": "LEX",
            "position": "AM",
            "photos": "/Images/PER/bg_02.gif",
            "pid": "topId",
            "children": []
        }, {
            "id": "D0732",
            "name": "test",
            "position": "AM",
            "photos": "/Images/PER/bg_02.gif",
            "pid": "topId",
            "children": []
        }, {
            "id": "101BJ559",
            "name": "肖锋",
            "position": "(兼)AM",
            "photos": "/Images/PER/bg_02.gif",
            "pid": "topId",
            "children": []
        }]
    }]
    var s = $("#orgTree").OkrTree({
        data: json, // 数据源
        isdrop: true, //是否支持拖拽
        tagTemplate: function(data) {
            return ["<div style='width:120px;background:#eee;border-radius:2px'>",
                "<img width='100%' height='110' src='http://msn-img-nos.yiyouliao.com/inforec-20210228-5a4be96489a4a0438c29a245ac1138cd.jpg?time=1614570307&signature=420D3D47ECAA5F587BA137C3C83F189B' />",
                data.name, "</div>"
            ].join("");
        },
        itemTemplate: function(data) {
            return ["<div style='width:120px;background:#eee;border-radius:2px;overflow:hidden'>",
                "<img width='100%' height='110' src='http://msn-img-nos.yiyouliao.com/inforec-20210228-5a4be96489a4a0438c29a245ac1138cd.jpg?time=1614570307&signature=420D3D47ECAA5F587BA137C3C83F189B' />",
                data.name, "</div>"
            ].join("");
        }
    })
    console.log(s)
</script>